@{
    ViewData["Title"] = "Home Page";
}
@model dynamic
<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>A url shortener built with ASP.NET Core and Mongo DB</p>
</div>

<div style="width: 100%; margin-top: 60px;">
    <div style="width: 65%; margin-left: auto; margin-right: auto;">
        <table class="table table-striped table-no-bordered table-hover" cellspacing="0">
            <thead class="text-center">
            <th class="text-center">Kullanıcı Adı</th>
            <th class="text-center">Admin Yetkisi</th>
            <th class="text-center">Kısaltma Sayısı</th>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.Users)
                {

                    <tr class="text-center">
                        <td class="text-center">@item.userName</td>
                        <td class="text-center">@item.admin</td>
                        <td class="text-center">@item.Urls</td>
                    </tr>
                }
            </tbody>
        </table>
        <table class="table table-striped table-no-bordered table-hover" cellspacing="0">
            <thead class="text-center">
            <th class="text-center">Kullanıcı Adı</th>
            <th class="text-center">Asıl Url</th>
            <th class="text-center">Kısaltılmış Url</th>
            <th class="text-center">Tıklama Sayısı</th>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.shortUrls)
                {
                    <tr class="text-center">
                        <td class="text-center">@item.User</td>
                        <td class="text-center">@item.OriginalUrl</td>
                        <td class="text-center">@item.ShortUrl</td>
                        <td class="text-center">@item.Click</td>
                    </tr>
                }
            </tbody>
        </table>
        <table class="table table-striped table-no-bordered table-hover" cellspacing="0">
            <thead class="text-center">
            <th class="text-center">Kullanıcı</th>
            <th class="text-center">Asıl Url</th>
            <th class="text-center">Kısaltılmış Url</th>
            <th class="text-center">Tıklama Sayısı</th>
            </thead>
            <tbody>
                @foreach (ShortenedUrl item in Model.MostUrl)
                {
                    <tr class="text-center">
                        <td class="text-center">@item.User</td>
                        <td class="text-center">@item.OriginalUrl</td>
                        <td class="text-center">@item.ShortUrl</td>
                        <td class="text-center">@item.Click</td>
                    </tr>
                }
            </tbody>
        </table>
        <table class="table table-striped table-no-bordered table-hover" cellspacing="0">
            <thead class="text-center">
            <th class="text-center">Kullanıcı Adı</th>
            <th class="text-center">Kısaltma</th>
            </thead>
            <tbody>
                @foreach (User item in Model.MostUser)
                {
                    <tr class="text-center">
                        <td class="text-center">@item.userName</td>
                        <td class="text-center">@item.Urls</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<div class="row">
    <div class="col-6">
        <div class="card">
            <div class="card-header">
                Pie Chart
            </div>
            <div class="card-body">
                <canvas class="my-4 h-25" id="pie"></canvas>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js" integrity="sha512-zO8oeHCxetPn1Hd9PdDleg5Tw1bAaP0YmNvPY8CwcRyUk7d7/+nyElmFrB6f7vg4f7Fv4sui1mcep8RIEShczg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript">
    var piechart = '@ViewBag.shortUrls';
    piechart.forEach(mypiechart)
    var mypiechart= new Chart(piechart,{
    type: 'pie',
    data: {
        labels:@Html.Raw(ViewBag.Exponate),
        datasets: [{
            label: 'Bar Chart',
            data: [100,200,300],
                backgroundColor: 'rgba(19, 75, 95, 1)'
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks:{
                    beginAtZero: true
                }
            }]
        }
    }

})
</script>